digraph SelfRight {
// UPRIGHT MOVE_HAMMER_FORWARD WAIT_STABLE SELF_RIGHT_LEFT
// SELF_RIGHT_RIGHT WAIT_UPRIGHT HAMMER_RETRACT
node [shape="box"];
LOCK_OUT [shape="octagon"];

Start [shape="circle"];
Start -> UPRIGHT;

Disable [shape="ellipse" label="Weapons or SelfRighting\nDisabled"]
Disable -> UPRIGHT

UPRIGHT -> WAIT_HAMMER_FORWARD [label="ORN_LEFT or ORN_RIGHT"
                                color="green"];
UPRIGHT -> UPRIGHT [label="right side up"];

WAIT_HAMMER_FORWARD -> EXTEND [label="Hammer is forward"
                                     color="green"];
WAIT_HAMMER_FORWARD -> EXTEND [label="2.0 second time out"
                                     color="red"];
WAIT_HAMMER_FORWARD -> HAMMER_RETRACT [label="Right side up"
                                       color="green"]

EXTEND -> WAIT_UPRIGHT [color="green"];
EXTEND [label="Extend bar corresponding to\norientation measured"];

WAIT_UPRIGHT -> HAMMER_RETRACT [label="right side up"
                                color="green"];
WAIT_UPRIGHT -> GIVE_UP [label="3.0 second time out"
                          color="orange"];

GIVE_UP [label="Retract bar"];
GIVE_UP -> LOCK_OUT [color="orange"];

HAMMER_RETRACT -> UPRIGHT [label="hammer retracted"
                           color="green"];
HAMMER_RETRACT -> UPRIGHT [label="2.0 second time out"
                           color="red"];

LOCK_OUT -> UPRIGHT [label="right side up"
                     color="green"];
}
